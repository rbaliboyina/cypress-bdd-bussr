name: cypress tests
on: [push]
jobs:
  cypress-smoke-run:
    runs-on: windows-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v2.4.2
      - name: Cypress.io
        uses: cypress-io/github-action@v2.9.7
        with:
          start: npm run cypress:smoke:headless
      - name: generate the reports
        run: npm run generate:htmlreport
      - name: copy test report to public folder
        run:
          mkdir public
          cp -r .//reports//cucumber-htmlreport-html public/report
      - name: publish the reports to github pages
        uses: peaceiris/actions-gh-pages@v3
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: ./out  # default: public
